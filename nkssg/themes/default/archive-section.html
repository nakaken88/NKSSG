{% extends "main.html" %}


{% block head_tag -%}
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
{%- endblock %}


{% block content %}
{% if mypage.parents -%}
<div class="breadcrumb">
  {% for parent in mypage.parents %}
    {%- if parent.rel_url == "" or parent.rel_url == "/" %}
    <a href="{{ parent.url }}">{{ parent.name }}</a>
    {%- elif loop.first %}
    <a href="{{ config.site.site_url }}">Home</a>
    / <a href="{{ parent.url }}">{{ parent.name }}</a>
    {%- else %}
    / <a href="{{ parent.url }}">{{ parent.name }}</a>
    {%- endif %}
  {%- endfor %}
  / {{mypage.title}}
</div>
{%- endif %}

<div class="entry">
  <h1>{{ mypage.title }}</h1>

  {% if mypage.meta and mypage.meta.image and mypage.meta.image.src -%}
  <p><img class="aligncenter" src="{{ mypage.meta.image.src }}"></p>
  {%- endif %}
  {% if mypage.content -%}
  {{ mypage.content }}
  {%- else -%}
  <div>(no content)</div>
  {%- endif %}
</div>

{% if mypage.children %}
<div class="subsection-list">
  <h2>Sub section</h2>
  <ul>
{%- for child in mypage.children %}
<li><a href="{{ child.abs_url }}">{{ child.title }}</a></li>
{%- endfor %}
</ul>
</div>
{%- endif %}


{%- for page in pages if page.url != mypage.url %}
{%- if loop.first %}
<div class="page-list">
  <h2>Page list</h2>
{%- endif %}
  <div class="page-item">

    <div class="page-image">
    {% if page.meta and page.meta.image and page.meta.image.src -%}
    <img src="{{page.meta.image.src}}" alt="">
    {% elif page.meta and page.meta.emoji -%}
    <div class="thumbnail-emoji">{{ page.meta.emoji }}</div>
    {% elif theme.emoji -%}
    {% set total_emoji = theme.emoji|length -%}
    {% set index = (page.date.strftime('%Y%m%d%H%M%S') | int) % total_emoji %}
    <div class="thumbnail-emoji">{{ theme.emoji[index] }}</div>
    {%- endif %}
    </div>
  
    <div class="page-item-body">
      <div class="page-item-info">
        <small>{{ page.date.strftime('%Y/%m/%d') }}</small>
      </div>
      <a href="{{ page.url }}">{{ page.title }}</a>
    </div>
  </div>
{%- if loop.last %}
</div>
{%- endif %}
{%- endfor %}


{% if paginator and paginator.pages and paginator.pages | count > 1 -%}
<div>
  <div class="pagination">
{%- for page in paginator.pages %}
  {% if page.page_number == paginator.paged -%}
    <span aria-current="page" class="page-numbers current">{{ page.page_number }}</span>
  {%- else -%}
    <a class="page-numbers" href="{{ page.url }}">{{ page.page_number }}</a>
  {%- endif %}
{%- endfor %}
  </div>
</div>
{%- endif %}
{% endblock %}
