{% extends "main.html" %}


{% block head_tag -%}
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
{%- endblock %}


{% block calc_title_tag -%}
{%- if mypage.rel_url and mypage.rel_url == "/" %}
{%-   set ns.title_tag = config.site.site_name %}
{%- elif paginator.paged == 1 %}
{%-   set ns.title_tag = mypage.title ~ " | " ~ config.site.site_name %}
{%- else %}
{%-   set ns.title_tag = mypage.title ~ " | Page " ~ paginator.paged ~ " | " ~ config.site.site_name %}
{%- endif %}
{%- endblock %}


{% block content %}
{%- if paginator.paged == 1 and mypage.archive_type == "date" and mypage.is_root -%}
<h1>Post List</h1>
{%- elif mypage.archive_type == "date" and mypage.is_root -%}
<h1>Post List: {{ paginator.paged }} Page</h1>
{%- elif paginator.paged == 1 -%}
<h1>"{{ mypage.title }}" List</h1>
{%- else -%}
<h1>"{{ mypage.title }}" List: {{ paginator.paged }} page</h1>
{%- endif %}

{% if pages -%}
<div class="page-list">
{%- for page in pages %}
  <div class="page-item">

    <div class="page-image">
    {% if page.meta and page.meta.image and page.meta.image.src -%}
    <img src="{{page.meta.image.src}}" alt="">
    {% elif page.meta and page.meta.emoji -%}
    <div class="thumbnail-emoji">{{ page.meta.emoji }}</div>
    {% elif theme.emoji -%}
    {% set total_emoji = theme.emoji|length -%}
    {% set index = (page.date.strftime('%Y%m%d%H%M%S') | int) % total_emoji %}
    <div class="thumbnail-emoji">{{ theme.emoji[index] }}</div>
    {%- endif %}
    </div>

    <div class="page-item-body">
      <div class="page-item-info">
        <small>{{ page.date.strftime('%Y/%m/%d') }}</small>
      </div>
      <a href="{{ page.url }}">{{ page.title }}</a>
    </div>
  </div>
{%- endfor %}
</div>
{%- endif %}

{% if paginator and paginator.pages -%}
<div>
  <div class="pagination">
{%- for page in paginator.pages %}
  {% if page.page_number == paginator.paged -%}
    <span aria-current="page" class="page-numbers current">{{ page.page_number }}</span>
  {%- else -%}
    <a class="page-numbers" href="{{ page.url }}">{{ page.page_number }}</a>
  {%- endif %}
{%- endfor %}
  </div>
</div>
{%- endif %}
{% endblock %}
